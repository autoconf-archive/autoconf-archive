# .travis.yml

language: c
os: linux
dist: xenial
git:
  depth: 50000

addons:
  apt:
    packages:
      - gnulib
      - lzip
      - python3
      - texlive
      - texinfo
      - tidy
      - autoconf
      - automake
      - remake
      - sed

script:
  - ./bootstrap.sh
  - ./configure --enable-maintainer-mode
  - remake PYTHON=python3 -j$(nproc) maintainer-all all
  - remake check
  - remake distcheck AM_DISTCHECK_DVI_TARGET=""
  - if test -e doc/all-macros.texi; then remake web-manual; else echo "missing doc/all-macros.texi!" >&2 && exit 1; fi
  - ./fix-website.sh
